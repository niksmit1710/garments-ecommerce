{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Your Cart</title>
    <link rel="stylesheet"
     href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">

<h2>Your Cart</h2>

{% if cart.cart %}
<table class="table table-bordered">
    <tr>
        <th>Product</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
        <th></th>
    </tr>

    {% for item in cart.items %}
    <tr>
        <td>{{ item.product.name }}</td>
        <td>
    <form method="post"
          action="{% url 'cart:update' item.product.id %}">
        {% csrf_token %}
        <select name="qty"
                class="form-select form-select-sm"
                onchange="this.form.submit()">

            {% for i in "12345678910"|make_list %}
                <option value="{{ forloop.counter }}"
                    {% if item.qty == forloop.counter %}selected{% endif %}>
                    {{ forloop.counter }}
                </option>
            {% endfor %}

        </select>
    </form>
</td>

        <td>₹ {{ item.product.price }}</td>
        <td>₹ {{ item.total_price }}</td>
        <td>
            <a href="{% url 'cart:remove' item.product.id %}"
               class="btn btn-sm btn-danger">
               Remove
            </a>
        </td>
    </tr>
    {% endfor %}
</table>

<h4>Total: ₹ {{ cart.total_price }}</h4>
<a href="{% url 'orders:checkout' %}"
   class="btn btn-success">
   Proceed to Checkout
</a>

{% else %}
<p>Your cart is empty.</p>
{% endif %}

</body>
</html>
